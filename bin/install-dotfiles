#!/bin/bash -x
cd ~/dotfiles

git add .
git stash
git pull --rebase
git stash pop

for file in tmux.conf zsh zshrc gitignore_global vim gvimrc vimrc ssh/config gitconfig gemrc irbrc ackrc railsrc
do
  echo "Linking $file to ~/.$file..";
  rm ~/.$file;
  ln -sf ~/dotfiles/$file ~/.$file;
done

# Update thirdparty vim plugins and such
git submodule init
git submodule update

if [ "$(uname -s)" == 'Darwin' ]; then
  mkdir -p /Applications/terminal-notifier.app/Contents/MacOS/
  ln -s `bundle show terminal-notifier`/bin/terminal-notifier \
    /Applications/terminal-notifier.app/Contents/MacOS/terminal-notifier 
fi
